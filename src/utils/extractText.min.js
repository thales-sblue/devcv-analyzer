import*as pdfjsLib from"pdfjs-dist";import pdfjsWorker from"pdfjs-dist/build/pdf.worker.mjs?worker";import mammoth from"mammoth";pdfjsLib.GlobalWorkerOptions.workerPort=new pdfjsWorker;export async function extractTextFromFile(t){const r=t.name.split(".").pop().toLowerCase(),o=t.type,a="pdf"===r||"application/pdf"===o,e="docx"===r||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===o;try{return a?await extractTextFromPDF(t):e?await extractTextFromDocx(t):"Formato de arquivo n√£o suportado."}catch(t){return"Ocorreu um erro ao ler o arquivo."}}async function extractTextFromPDF(t){const r=await t.arrayBuffer(),o=await pdfjsLib.getDocument({data:r}).promise;let a="";for(let t=1;t<=o.numPages;t++){const r=await o.getPage(t);a+=(await r.getTextContent()).items.map((t=>t.str)).join(" ")+"\n"}return a.replace(/\s+/g," ").trim()}async function extractTextFromDocx(t){const r=await t.arrayBuffer();return(await mammoth.extractRawText({arrayBuffer:r})).value.replace(/\s+/g," ").trim()}