import*as pdfjsLib from"pdfjs-dist";import mammoth from"mammoth";pdfjsLib.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;export async function extractTextFromFile(t){const r=t.name.split(".").pop().toLowerCase(),a=t.type,o="pdf"===r||"application/pdf"===a,e="docx"===r||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===a;try{return o?await extractTextFromPDF(t):e?await extractTextFromDocx(t):"Formato de arquivo n√£o suportado."}catch(t){return"Ocorreu um erro ao ler o arquivo."}}async function extractTextFromPDF(t){const r=await t.arrayBuffer(),a=await pdfjsLib.getDocument({data:r}).promise;let o="";for(let t=1;t<=a.numPages;t++){const r=await a.getPage(t);o+=(await r.getTextContent()).items.map((t=>t.str)).join(" ")+"\n"}return o.replace(/\s+/g," ").trim()}async function extractTextFromDocx(t){const r=await t.arrayBuffer();return(await mammoth.extractRawText({arrayBuffer:r})).value.replace(/\s+/g," ").trim()}